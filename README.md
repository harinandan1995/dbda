# Building Design Assistant

Code to generate a 3D model given the shape of the building and other input parameters

...... to be filled .........

## Usage

### Packages

Before executing the code a few python packages have to be installed.

Run the following commands to setup a virtual environment and install the packages in this environment 

Install **pip** first

    sudo apt-get install python3-pip

Then install **virtualenv** using pip3

    sudo pip3 install virtualenv 

Now create a virtual environment 

    virtualenv venv 

> you can use any name instead of **venv**

Active your virtual environment   
    
    source venv/bin/activate
    
Install necessary packages

    pip3 install -r requirements.txt

### Dataset

The dataset for the model is generated by transforming the vector files provided by [Raster-to-Vector](http://art-programmer.github.io/floorplan-transformation/paper.pdf)
which contains positions of various building elements and room types in a txt file.

Run the following command to transform these vector files into either *tfrecords* or *hdf5* or *png*

    python3.py transform -i ./datasets/vectors -o ./datasets/tfrecords -t tfrecord
    
> Change the last argument to save the output in different formats. Allowed values: tfrecord, hdf5 and png

Note: png files are just for visualization and is not a valid data for training the model

### GAN Training

Architecture used for this step is inspired from [Pix2Pix](https://arxiv.org/abs/1611.07004), which uses a auto 
encoder as a generator to improve the image to image translation.

The input for the generator is the shape of the building and the output is 13 channeled output : 
walls(1), doors(1), windows(1), room types(10)

Discriminator takes the shape of the building and the output generated by the generator as the input

To train the GAN setup run

    python3 train.py --data ./datasets/tfrecords -e 25 -b 64 -c ./checkpoints -s ./summaries 
    
> e represents number of EPOCHS, b represents batch size to be used

Run `python3 train.py --help` to check the available arguments and descriptions.

### Summary

Losses and mean, stddev, min and max of generated output and target are stored in summary files 

To view the summary run the following command

    tensorboard --logdir=./summaries
 
Use the following command if you are using a virtual environment
     
    venv/bin/tensorboard --logdir=./summaries
    
> 
